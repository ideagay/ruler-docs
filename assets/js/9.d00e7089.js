(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{166:function(e,a,t){"use strict";t.r(a);var n=t(0),r=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#file","aria-hidden":"true"}},[e._v("#")]),e._v(" File")]),e._v(" "),t("pre",[t("code",[e._v("import { File } from '@souche-f2e/ruler-tool';\n")])]),e._v(" "),t("h2",{attrs:{id:"fetchall"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fetchall","aria-hidden":"true"}},[e._v("#")]),e._v(" fetchAll")]),e._v(" "),t("h3",{attrs:{id:"入参"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#入参","aria-hidden":"true"}},[e._v("#")]),e._v(" 入参")]),e._v(" "),t("pre",[t("code",[e._v("{\n    *apps: <<String>> 关联的应用\n    *pageSize: <<Number>> 分页，一页获取多少条\n    *page: <<Number>> 分页，获取哪一页的数据\n    search: <<String>> 模糊查找符合文件名所的文件\n}\n")])]),e._v(" "),t("h3",{attrs:{id:"出参"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#出参","aria-hidden":"true"}},[e._v("#")]),e._v(" 出参")]),e._v(" "),t("pre",[t("code",[e._v("{\n    totalPage: <<Number>> 总页数\n    currentPage: <<Number>> 当前请求页码\n    totalNumber: <<Number>> 总记录条数\n    data: [{\n        _id\n        apps\n        path: <<String>> 文件的url\n        filename: <<String>> 文件的原始名称\n        mimetype: <<String>> 文件的 mimetype 类型\n    }]\n}\n")])]),e._v(" "),t("h3",{attrs:{id:"用法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用法","aria-hidden":"true"}},[e._v("#")]),e._v(" 用法")]),e._v(" "),t("pre",[t("code",[e._v("File\n.fetchAll({\n    apps: '5b19ec2a3aaa1900073cebde',\n    // search: 'file',\n    page: 1,\n    pageSize: 20\n})\n.then((d) => {\n    console.log(d);\n})\n")])]),e._v(" "),t("h2",{attrs:{id:"fetchbyid"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fetchbyid","aria-hidden":"true"}},[e._v("#")]),e._v(" fetchById")]),e._v(" "),t("h3",{attrs:{id:"入参-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#入参-2","aria-hidden":"true"}},[e._v("#")]),e._v(" 入参")]),e._v(" "),t("pre",[t("code",[e._v("{\n    _id: <<String>> 切记 _id 和 path 两者至少有一个用于查找文件\n    path: <<String>>\n}\n")])]),e._v(" "),t("h3",{attrs:{id:"出参-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#出参-2","aria-hidden":"true"}},[e._v("#")]),e._v(" 出参")]),e._v(" "),t("pre",[t("code",[e._v("{\n    _id\n    apps\n    path\n    filename\n    mimetype\n}\n")])]),e._v(" "),t("h3",{attrs:{id:"用法-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用法-2","aria-hidden":"true"}},[e._v("#")]),e._v(" 用法")]),e._v(" "),t("pre",[t("code",[e._v("File\n.fetchById({\n    // path: 'test2.png',\n    _id: '5b4f2801bc480e4e73f41c89'\n})\n.then((d) => {\n    console.log(d);\n})\n")])]),e._v(" "),t("h2",{attrs:{id:"create"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create","aria-hidden":"true"}},[e._v("#")]),e._v(" create")]),e._v(" "),t("h3",{attrs:{id:"入参-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#入参-3","aria-hidden":"true"}},[e._v("#")]),e._v(" 入参")]),e._v(" "),t("pre",[t("code",[e._v("{\n    *file: <<File>> multipart-form的文件部分\n    *apps: <<String>> 该应用的id\n}\n")])]),e._v(" "),t("h3",{attrs:{id:"出参-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#出参-3","aria-hidden":"true"}},[e._v("#")]),e._v(" 出参")]),e._v(" "),t("pre",[t("code",[e._v("{\n    _id\n    apps\n    path\n    filename\n    mimetype\n}\n")])]),e._v(" "),t("h3",{attrs:{id:"用法-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用法-3","aria-hidden":"true"}},[e._v("#")]),e._v(" 用法")]),e._v(" "),t("pre",[t("code",[e._v("// 如果是node调用\n\nFile\n.create({\n    file: fs.createReadStream(__dirname + '/file-demo.js'),\n    apps: '5b19ec2a3aaa1900073cebde'\n})\n.then((d) => {\n    console.log(d);\n})\n\n// 如果是前端，xhr设置如下，第二句具体上传的文件可以获取\n\n<input type=\"file\" id=\"upload\" on-change=\"changed\">\n\nvar upload = document.getElementById('upload');\nupload.addEventListener('change', function (e) {\n    let theFile = upload.files[0]\n\n    File\n    .create({\n        file: theFile,\n        apps: '5b19ec2a3aaa1900073cebde'\n    })\n    .then((d) => {\n        console.log(d);\n    })\n})\n")])]),e._v(" "),t("h2",{attrs:{id:"update"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#update","aria-hidden":"true"}},[e._v("#")]),e._v(" update")]),e._v(" "),t("h3",{attrs:{id:"入参-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#入参-4","aria-hidden":"true"}},[e._v("#")]),e._v(" 入参")]),e._v(" "),t("pre",[t("code",[e._v("{\n    *_id: <<String>>\n    *filename: <<String>> 欲要改成的文件名\n}\n")])]),e._v(" "),t("h3",{attrs:{id:"出参-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#出参-4","aria-hidden":"true"}},[e._v("#")]),e._v(" 出参")]),e._v(" "),t("pre",[t("code",[e._v("{\n    _id\n    apps\n    path\n    filename\n    mimetype\n}\n")])]),e._v(" "),t("h3",{attrs:{id:"用法-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用法-4","aria-hidden":"true"}},[e._v("#")]),e._v(" 用法")]),e._v(" "),t("pre",[t("code",[e._v("File\n.update({\n    _id: '5b4f2801bc480e4e73f41c89',\n    filename: 'demo.js'\n})\n.then((d) => {\n    console.log(d);\n})\n")])]),e._v(" "),t("h2",{attrs:{id:"delete"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#delete","aria-hidden":"true"}},[e._v("#")]),e._v(" delete")]),e._v(" "),t("h3",{attrs:{id:"入参-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#入参-5","aria-hidden":"true"}},[e._v("#")]),e._v(" 入参")]),e._v(" "),t("pre",[t("code",[e._v("{\n    _id: <<String>> _id和path必有一项，用于找到这个文件\n    path: <<String>>\n}\n")])]),e._v(" "),t("h3",{attrs:{id:"出参-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#出参-5","aria-hidden":"true"}},[e._v("#")]),e._v(" 出参")]),e._v(" "),t("pre",[t("code",[e._v("{\n    _id\n    apps\n    path\n    filename\n    mimetype\n}\n")])]),e._v(" "),t("h3",{attrs:{id:"用法-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用法-5","aria-hidden":"true"}},[e._v("#")]),e._v(" 用法")]),e._v(" "),t("pre",[t("code",[e._v("File\n.delete({\n    // path: 'test3.png',\n    _id: '5b4f2801bc480e4e73f41c89'\n})\n.then((d) => {\n    console.log(d);\n})\n")])])])}],!1,null,null,null);r.options.__file="file.md";a.default=r.exports}}]);