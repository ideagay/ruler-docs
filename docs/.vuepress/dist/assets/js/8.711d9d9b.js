(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{168:function(e,n,t){"use strict";t.r(n);var a=t(0),s=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"dingding"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dingding","aria-hidden":"true"}},[e._v("#")]),e._v(" DingDing")]),e._v(" "),t("pre",[t("code",[e._v("import {Ding} from '@souche-f2e/ruler-tool';\n")])]),e._v(" "),t("h2",{attrs:{id:"searchdduser"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#searchdduser","aria-hidden":"true"}},[e._v("#")]),e._v(" searchdduser")]),e._v(" "),t("h3",{attrs:{id:"入参"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#入参","aria-hidden":"true"}},[e._v("#")]),e._v(" 入参")]),e._v(" "),t("pre",[t("code",[e._v("{\n    * mobile: String 手机号码\n}\n")])]),e._v(" "),t("h3",{attrs:{id:"出参"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#出参","aria-hidden":"true"}},[e._v("#")]),e._v(" 出参")]),e._v(" "),t("pre",[t("code",[e._v("{ \n    code: '200',\n    data:{ \n        shopCode: 'IN000000',\n        iid: 2497543,\n        dingId: 'xxxxxxxx',\n        sex: '1',\n        dingDepartment: '杭州总部-无线开发中心-无线业务开发部',\n        dateCreate: '2018-05-28 14:20:42',\n        lastLoginIp: '172.17.11.79',\n        phone: 'xxxxxxxx',\n        ssoDingId: '$:LWCP_v1:$XO4ebuJ/XPKeVOcY6EgAjg==',\n        dateUpdate: '2018-07-25 14:31:33',\n        organization: 'souche',\n        nickname: 'xxxxx',\n        id: '9teaPjaK2z',\n        account: 'xxxxxxxxx',\n        email: 'xxxxxxxxx',\n        status: '0' \n    },\n    msg: '',\n    success: true,\n    traceId: 'nnUCWy' \n}\n")])]),e._v(" "),t("h3",{attrs:{id:"用法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用法","aria-hidden":"true"}},[e._v("#")]),e._v(" 用法")]),e._v(" "),t("pre",[t("code",[e._v("async function getDingId() {\n    let result = await Ding.searchDDUser(1358830xxxx);\n    console.log(result);\n}\n")])]),e._v(" "),t("h2",{attrs:{id:"pushddmessage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pushddmessage","aria-hidden":"true"}},[e._v("#")]),e._v(" pushddmessage")]),e._v(" "),t("h3",{attrs:{id:"入参-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#入参-2","aria-hidden":"true"}},[e._v("#")]),e._v(" 入参")]),e._v(" "),t("pre",[t("code",[e._v("{\n    * msgtype: String 消息类型，可选: text, image, link等;更多可参钉钉消息格式文档（https://open-doc.dingtalk.com/docs/doc.htm?spm=a219a.7629140.0.0.KNUvPX&treeId=374&articleId=104972&docType=1）\n    * msgcontent: Object 消息体，可从钉钉文档查看具体对应格式体\n    robotToken: String 机器人token\n    atMobiles: Array 群机器人发送消息at人的手机号数组\n    isAtAll: boolean 群机器人发送消息是否at群所有人，默认false\n    mobileList: Array 接收者手机号码，最长20个\n    userIdList: Array 接收者的userid列表，最长20个\n    deptIdList: Array 接收者部门id列表，最长20个\n    toAllUser: boolean 是否发送给企业全部用户，默认false\n    callBack: function 发送消息完毕，进行回调函数\n    preBack: function 发送消息前，消息回调；函数参数为msgcontent 对象，可以在发送前对消息体进行二次编辑；如果函数返回true，则会暂停发送消息，并调用callBack函数返回\n}\n\n注意：\n1.robotToken 不为空，则优先发送机器人消息\n2.atMobiles 被@人的手机号(在text内容里要有@手机号)，具体可查看下面用法\n3.robotToken, atMobiles, isAtAll 为发送群机器人参数\n4.mobileList，userIdList，deptIdList，toAllUser只准同时传递一组数据，如果同时传入多个参数，则发送信息优先级为mobileList>userIdList>deptIdList>toAllUser\n")])]),e._v(" "),t("h3",{attrs:{id:"出参-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#出参-2","aria-hidden":"true"}},[e._v("#")]),e._v(" 出参")]),e._v(" "),t("pre",[t("code",[e._v("{ \n    success: true,\n    code: 200,\n    msg: 'success',\n    data:{ \n        dingding:{ dingtalk_corp_message_corpconversation_asyncsend_response: [Object] } } \n}\n")])]),e._v(" "),t("h3",{attrs:{id:"用法-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用法-2","aria-hidden":"true"}},[e._v("#")]),e._v(" 用法")]),e._v(" "),t("pre",[t("code",[e._v("async function sendDDMessage() {\n    let params = {\n        msgtype: 'text',\n        msgcontent: {\n            \"content\": \"测试信息， 测试test11111 @15267854001\"\n        },\n        atMobiles: ['15267854001'],\n        robotToken: '3f0b5af0729c2f87f5e8c37decd04080355e5a915f7d5686a78e22de45fbed3b',\n        mobileList: ['15267854001'],\n        preBack: function(msgcontent) {\n            msgcontent['content'] = '这是测试信息1';\n        }\n    }\n    Ding.pushDDMessage(params);\n}")])])])}],!1,null,null,null);s.options.__file="dingding.md";n.default=s.exports}}]);